<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../css/public.css">

  <script>
    let startBtn;
    let vimg = null;
    let rand = -1;
    const proc1 = (btn) => {

      // border테두리를 삭제 ( 처음 실행시 오류가 발생하는 것을 방지하기 위하여 위에 변수 선언 후 조건문 제시 )
      // 두번째 시작버튼 클릭 할때 부터 실행이 된다.
      if(vimg != null){
        vimg[rand].style.border = "none"
      }
      


      // btn변수는 시작버튼, 지역변수, 매개변수,
      // 시작버튼을 사라지게
      startBtn = btn;
      startBtn.style.display = "none";
      // btn지역변수를 stop()함수에서 사용할수있도록 전역변수로 변경
      gbtn = btn;

      // result1 검색
      res = document.getElementById('result1');

      // 모든 자식노드를 가져온다.
      vimg = res.children;  //  HTMLCollection리턴 주석 줄바꿈 포함하지 않는다.

      // 1마다 한번씩 첫번째 이미지가 뒤로 이동
      timer = setInterval(function(){ 

        // 첫번째 이미지를 선택 - vimg[0]
        // result1의 맨 뒤로 보냄 - appendChild
        res.appendChild(vimg[0])


      }, 500)

      
    }

    const stop = () => {
      // 시작버튼을 보이도록
      startBtn.style.display = "inline";

      // 실행을 종료
      clearInterval(timer);

      // 랜덤으로 이미지 하나를 선택 - border를 설정
      rand = Math.floor(Math.random() * vimg.length);
      vimg[rand].style.border ="5px double red";

    }
  </script>
  <style>
    img {
      width: 100px;
      height: 100px;
    }
  </style>
</head>
<body>
  
  <div class="box">
    <h3>시작 버튼 클릭하면 첫번째 이미지를 맨 뒤로 이동한다<br>
    시작버튼은 안보이도록 설정 종료버튼 클릭하면 실행을 멈추고 시작버튼 다시 나오도록 한다
    1초마다 한번씩 반복 실행한다
    </h3>
    <input type="button" value="시작" onclick="proc1(this)">
    <input type="button" value="종료" onclick="stop()">

    <br><br>
    <div id="result1" class="res">
      <img src="../images/jQuery.jpg" alt="">
      <img src="../images/studycom.jpg" alt="">
      <img src="../images/딸기스무디.jpg" alt="">
      <img src="../images/모래알갱이2.png" alt="">
      <img src="../images/셔틀콕.jpg" alt="">
      <img src="../images/아메리카노.jpg" alt="">
      <img src="../images/카푸치노.jpg" alt="">
    </div>

  </div>

</body>
</html>
